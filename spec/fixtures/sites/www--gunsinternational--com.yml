---
site_data:
  :domain: www.gunsinternational.com
  :adapter:
    seller_defaults:
      listing_type: classified
    validation:
      classified: raw['image'] && raw['title'] && raw['keywords'] && raw['price'] && raw['item_location']
    digest_attributes:
    - defaults
    - url
    image:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[1]/a[1]/img/@src
    title:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[2]//tr/td/h1
        filters:
        - reject: !ruby/regexp '/Contact seller/'
    - scraper_method: meta_keywords
    description:
    - scraper_method: meta_description
    keywords:
    - scraper_method: meta_keywords
    item_location:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]//tr[4]/td/table//tr[2]/td[2]/table
        regexp: !ruby/regexp '/Zip:\s+\d{5}/i'
        filters:
        - accept: !ruby/regexp '/\d{5}/'
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]//tr[3]/td/table//tr/td[1]/table
        regexp: !ruby/regexp '/Item\s+Location:\s+(\w|,| |  )+\n\n/i'
        filters:
        - reject: !ruby/regexp '/Item\s+Location:/i'
    price:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]
        regexp: !ruby/regexp '/Price:\s+\$\s*\d[\d\,\.]+/i'
        filters:
        - accept: !ruby/regexp '/\$\s*\d[\d\,\.]+/i'
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]
        regexp: !ruby/regexp '/Price:\s+\d[\d\,\.]+/i'
        filters:
        - accept: !ruby/regexp '/\s*\d[\d\,\.]+/i'
    item_condition:
    - scraper_method: classify_by_xpath
      arguments:
        type: New
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]//tr[3]/td/table
        regexp: !ruby/regexp '/Condition:\s+(\w| |)*/i'
        filters:
        - accept: !ruby/regexp '/New|Unfired/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Used
        xpath: //table[3]//tr[1]/td[2]/table[3]//tr/td[2]/table[2]//tr[3]/td/table
        regexp: !ruby/regexp '/Condition:\s+(\w| |)*/i'
        filters:
        - accept: !ruby/regexp '/wear|scratches|used|marks|good/i'
    item_sold:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //div[@class='big_red']
        regexp: !ruby/regexp '/This item has already been sold/i'
    not_found:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //table[3]//tr[1]/td[2]/table[2]
        regexp: !ruby/regexp '/Page Not Found/i'
    category1:
    - scraper_method: classify_by_xpath
      arguments:
        type: Guns
        xpath: //td[@class='breadcrumbs']/a[2]
        regexp: !ruby/regexp '/Colts|Guns|Rifles|Pistols|Revolvers|AR-15 Copies|Firearms|Colts|Century
          Arms/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Guns
        xpath: //td[@class='breadcrumbs']/a[3]
        regexp: !ruby/regexp '/Colts|Guns|Rifles|Pistols|Revolvers|AR-15 Copies|Firearms|Colts|Century
          Arms/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Ammunition
        xpath: //td[@class='breadcrumbs']/a[2]
        regexp: !ruby/regexp '/Ammunition|Ammo/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Ammunition
        xpath: //td[@class='breadcrumbs']/a[3]
        regexp: !ruby/regexp '/Ammunition|Ammo/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Optics
        xpath: //td[@class='breadcrumbs']/a[2]
        regexp: !ruby/regexp '/Scope Mounts|Optics/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Optics
        xpath: //td[@class='breadcrumbs']/a[3]
        regexp: !ruby/regexp '/Scope Mounts|Optics/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Accessories
        xpath: //td[@class='breadcrumbs']/a[2]
        regexp: !ruby/regexp '/Gunsmith|Holsters|Laser|Reloading|Slings|Stocks|Stock
          Pads|Software|Cleaning|Cases|Parts|Safes|Sights|Accessories|Actions|Barrels|Bayonets|Chokes|Clips|Magazines/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Accessories
        xpath: //td[@class='breadcrumbs']/a[3]
        regexp: !ruby/regexp '/Gunsmith|Holsters|Laser|Reloading|Slings|Stocks|Stock
          Pads|Software|Cleaning|Cases|Parts|Safes|Sights|Accessories|Actions|Barrels|Bayonets|Chokes|Clips|Magazines/i'
  :service_options:
    compressed_links:
      http://www.gunsinternational.com/gun-classifieds-new-this-week.cfm?start_row=PAGENUM:
        start_at_page: 1
        stop_at_page: 1000
        step: 50
        link_xpaths:
        - //tr/td[2]/table[1]//tr/td[1]/a/@href
  :rate_limits:
    off_peak:
      start: '23:00'
      duration: 7
      rate: 2
    peak:
      start: '06:01'
      duration: 17
      rate: 4
  :name: Guns International
  :engine: www.ironsights.com
  :read_with: RefreshLinksWorker
  :size:
  :active: true
  :read_interval: 14400
