---
site:
  name: Ammo.net
  domain: ammo.net
  read_interval: 1440
  timezone: America/Chicago
  registrations:
    session_queue:
      ammo.net: {}
    object_adapter:
      ammo.net/product_feed:
        scripts:
          - globals/product_page
          - globals/validation
        schema: Listing
        queue: ammo.net/listings
        xpath: '//channel/item'
        attribute:
          condition: [{ value: new }]
          type:      [{ value: RetailListing }]
          location:  [{ value: "Atlanta, GA 30348" }]
          availability: [{ value: in_stock }]
          url:
            - find_by_xpath:
                xpath: .//link
          title:
            - find_by_xpath:
                xpath: .//title
          image:
            - find_by_xpath:
                xpath: .//g:image_link
          price_in_cents:
            - find_by_xpath:
                xpath: .//g:price
          availability:
            - label_by_xpath:
                label: in_stock
                xpath: .//g:availability
                pattern: !ruby/regexp '/^in stock/i'
            - label_by_xpath:
                label: out_of_stock
                xpath: .//g:availability
            - value: in_stock
          product_category1: [{ value: Ammunition }]
          product_number_of_rounds:
            - find_by_xpath:
                xpath: .//g:quantity
                regexp: !ruby/regexp '/\d{2,4}/i'
          product_caliber:
            - find_by_xpath:
                xpath: .//g:caliber
          product_grains:
            - find_by_xpath:
                xpath: .//g:bullet_weight
                regexp: !ruby/regexp '/\d{1,3}/i'
          product_manufacturer:
            - find_by_xpath:
                xpath: .//g:brand
  sessions:
    - queue: ammo.net
      session_definition: globals/standard_xml_session
      object_adapters: [ ammo.net/product_feed ]
      urls:
        - url: https://ammo.net/media/feeds/genericammofeed.xml
