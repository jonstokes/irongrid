---
site_data:
  :domain: www.armslist.com
  :adapter:
    seller_defaults:
      listing_type: classified
    validation:
      classified: raw['title'] && raw['item_location'] && raw['price']
    digest_attributes:
    - defaults
    - url
    title:
    - scraper_method: find_by_xpath
      arguments:
        xpath: .//title
        filters:
        - reject: !ruby/regexp '/^\s?ARMSLIST\s?\-\s?|\s?ARMSLIST\s?/'
        - reject: !ruby/regexp '/^\s?For Sale:\s?|\s?For Sale\/Trade:\s?|\s?FS\s?|\s?FT\s?|\s?FS\/FT\s?|\s?WTB\s?|\s?WANT
            TO BUY\s?/'
    - scraper_method: find_by_xpath
      arguments:
        xpath: .//h1[@class="title"]
        filters:
        - reject: !ruby/regexp '/^\s?ARMSLIST\s?\-\s?|\s?ARMSLIST\s?/'
        - reject: !ruby/regexp '/^\s?For Sale:\s?|\s?For Sale\/Trade:\s?|\s?FS\s?|\s?FT\s?|\s?FS\/FT\s?|\s?WTB\s?|\s?WANT
            TO BUY\s?/'
    - scraper_method: find_by_xpath
      arguments:
        xpath: .//h1[@class="title"]
        filters:
        - reject: !ruby/regexp '/^\s?ARMSLIST\s?\-\s?|\s?ARMSLIST\s?/'
        - reject: !ruby/regexp '/^\s?For Sale:\s?|\s?For Sale\/Trade:\s?|\s?FS\s?|\s?FT\s?|\s?FS\/FT\s?|\s?WTB\s?|\s?WANT
            TO BUY\s?/'
    description:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //article[@class='post-details clear-fix']/section[@class='content']
    image:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //section[@class="images"]/figure[1]/img/@src
    price:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //section[@class='info clear-fix']/div[@class='size-50p'][1]/dl[@class='label-value-list']
        regexp: !ruby/regexp '/\$\s*\d[\d\,\.]+/i'
    item_location:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //article[@class='post-details clear-fix']/section[@class='info clear-fix']/div[@class='size-50p'][2]/dl[@class='label-value-list']/dd[@class='location']
        regexp: !ruby/regexp '/^.+ [^-Map]/'
    item_sold:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //div[@class="message warning"]/div[@class="message-content"]
        regexp: !ruby/regexp '/listing/i'
    category1:
    - scraper_method: classify_by_xpath
      arguments:
        type: Guns
        xpath: //section[@class="info clear-fix"]/div[@class="size-50p"][2]/dl[@class="label-value-list"]/dd[2]
        regexp: !ruby/regexp '/Firearms|Handguns|Loaders|Rifles|Shotguns/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Ammunition
        xpath: //section[@class="info clear-fix"]/div[@class="size-50p"][2]/dl[@class="label-value-list"]/dd[2]
        regexp: !ruby/regexp '/Ammo/i'
    - scraper_method: classify_by_xpath
      arguments:
        type: Optics
        xpath: //section[@class="info clear-fix"]/div[@class="size-50p"][2]/dl[@class="label-value-list"]/dd[2]
        regexp: !ruby/regexp '/Optics/i'
    not_found:
    - scraper_method: find_by_xpath
      arguments:
        xpath: //div[@class="message error"]/div[@class="message-content"]
        regexp: !ruby/regexp '/This listing been flagged as a scam/i'
  :link_sources:
    seed_links:
      http://www.armslist.com/feed.rss?location=usa:
        link_xpaths:
        - //item/link
  :rate_limits:
    off_peak:
      start: '23:00'
      duration: 7
      rate: 2
    peak:
      start: '06:01'
      duration: 17
      rate: 4
  :name: Armslist
  :engine: www.ironsights.com
  :read_with: RefreshLinksWorker
  :link_list_format: xml
  :active: true
  :read_interval: 1800
