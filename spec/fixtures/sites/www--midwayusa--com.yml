---
name: Midway USA
domain: www.midwayusa.com
read_interval: 14400
timezone:
registrations:
  session_queue:
    www.midwayusa.com: {}
  object_adapter:
    www.midwayusa.com/product_page:
      $key: globals/product_page
      attribute:
        title:
        - find_by_xpath:
            xpath: //h1[@id='productDescription']
        - meta_title
        description:
        - meta_description
        - find_by_xpath:
            xpath: //div[@id='overview']
        image:
        - find_by_xpath:
            xpath: //div[@id='prod_img']/div[@id='img_wrap']/div[@id='images']/div[@class='default']/a[@id='imageClick']/@href
        - meta_og_image
        price_in_cents:
        - find_by_xpath:
            xpath: //div[@id='priceblock']/div[@id='savingsLine']/div[@id='comparePrice']
            pattern: !ruby/regexp '/\$\d[\d\,\.]+/i'
        - find_by_xpath:
            xpath: //div[@id='priceblock']/div[@id='currentPrice']/span
            pattern: !ruby/regexp '/\$\d[\d\,\.]+/i'
        sale_price_in_cents:
        - find_by_xpath:
            xpath: //div[@id='priceblock']/div[@id='currentPrice']/span[@class='sale']
            pattern: !ruby/regexp '/\$\d[\d\,\.]+/i'
        availability:
        - label_by_xpath:
            label: in_stock
            xpath: //div[@id='status_block']/div[@id='productStatus']
            pattern: !ruby/regexp '/Available/i'
        - label_by_xpath:
            label: out_of_stock
            xpath: //div[@id='status_block']/div[@id='productStatus']
            pattern: !ruby/regexp '/Out of Stock/i'
        product_category1:
        - label_by_xpath:
            label: Optics
            xpath: //div[@id='content']/div[@id='product_content']/div[@id='breadcrumbs']/span[1]
            pattern: !ruby/regexp '/Optics/i'
        - label_by_xpath:
            label: Optics
            xpath: //div[@id='product_content']/div[@id='breadcrumbs']/span[@class='youarehere']
            pattern: !ruby/regexp '/Optics/i'
        - label_by_xpath:
            label: Ammunition
            xpath: //div[@id='content']/div[@id='product_content']/div[@id='breadcrumbs']/span[1]
            pattern: !ruby/regexp '/Ammunition/i'
        - label_by_xpath:
            label: Ammunition
            xpath: //div[@id='product_content']/div[@id='breadcrumbs']/span[@class='youarehere']
            pattern: !ruby/regexp '/Ammunition/i'
        - label_by_xpath:
            label: Accessories
            xpath: //div[@id='product_content']/div[@id='breadcrumbs']
            pattern: !ruby/regexp '/Airguns|Gun Parts|Gunsmithing|Reloading|Shooting
              Gear/i'
    www.midwayusa.com/product_link:
      $key: globals/product_link
      xpath: //div[@id='products']/ol[@id='prodlist']/li[@class='prodlistitem list']//a[@class='description']
      attribute:
        product_link:
        - find_by_xpath:
            xpath: ./@href
        seller_domain:
        - value: www.midwayusa.com
affiliate_link_tag:
affiliate_program:
product_session_format:
  queue: www.midwayusa.com
  session_definition: globals/standard_html_session
  object_adapters:
  - www.midwayusa.com/product_page
sessions:
- queue: www.midwayusa.com
  session_definition: globals/standard_html_session
  object_adapters:
  - www.midwayusa.com/product_link
  urls:
  - url: http://www.midwayusa.com/find?sortby=1&itemsperpage=96&newcategorydimensionid=13950&pageNumber=PAGENUM
    start_at_page: 1
    stop_at_page: 52
  - url: http://www.midwayusa.com/find?sortby=1&itemsperpage=96&newcategorydimensionid=13946&pageNumber=PAGENUM
    start_at_page: 1
    stop_at_page: 325
- queue: www.midwayusa.com
  session_definition: globals/standard_html_session
  object_adapters:
  - www.midwayusa.com/product_link
  urls:
  - url: http://www.midwayusa.com/find?sortby=1&itemsperpage=96&newcategorydimensionid=13957&pageNumber=PAGENUM
    start_at_page: 1
    stop_at_page: 260
